#include <stdio.h>

#ifndef SENSOR_DATA_H 
#define SENSOR_DATA_H 

float sensor_data_array[91] = { 
    .33767094, .34183113, .36571747, .36551857, .36370186, 
    .36537880, .36785667, .36822220, .37015182, .36838882, 
    .36879192, .37344666, .37608574, .37250065, .37268875, 
    .38156822, .37394112, .38520168, .38384720, .39530659, 
    .90771202, .79073143, .40113304, .40678215, 1.16326431, 
    .91159271, 2.03768387, 1.62973541, 1.68444168, 1.44688477, 
    .39258148, .38756664, .38294418, .37998795, .37321014, 
    .37047966, .37446251, .36552395, .36091763, .36689995, 
    .36664192, .36296009, .36407272, .36086922, .36188511, 
    .36399208, .36406197, .36086922, .36242260, .36684616, 
    .36707191, .36745895, .36984543, .37044205, .37506451, 
    .37768211, .37652649, .38357841, .39575272, .39577423, 
    1.40477737, 2.32761444, 1.41106598, 1.41689240, 1.40631989, 
    1.62481186, 1.36623886, .43277004, .42734673, .42938919, 
    .41548958, .41959064, .41437157, .41392544, .40704552, 
    .40726585, .40278854, .40643272, .40598125, .40804523, 
    .40379902, .40142868, .39956356, .40402477, .40377754, 
    .40394417, .40632523, .40247139, .40753464, .40737877, 
    .41050159
}; 

#endif 

void detect_objects(float* data, int size) {
    int detected = 0; // 1 for detected, 0 for not detected
    int k;
    for (k = 0; k < size - 2; k++) {
        if (data[k] < 0.44 && data[k + 1] < 0.44 && data[k + 2] < 0.44) {
            detected = 1; // Start detection
            printf("Object detected starting at index %d\n", k);
        }

        if (detected && data[k] > 0.44) {
            detected = 0; // End detection
            printf("Object detection ended at index %d\n", k);
        }
    }

    // If still detected at the end of the loop
    if (detected) {
        printf("Object detection still ongoing at the end of the array\n");
    }
}

int main() {
    detect_objects(sensor_data_array, 91);
    return 0;
}
